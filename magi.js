!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.magi=t()}(this,function(){"use strict";var n={delay:0,duration:400,easing:"linear",transformOrigin:"50% 50% 0"},t=["translate","translate3d","translateX","translateY","translateZ","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","matrix","matrix3d","perspective"];function r(n,t){return n.indexOf(t)>-1}var e={arr:function(n){return Array.isArray(n)},obj:function(n){return r(Object.prototype.toString.call(n),"Object")},str:function(n){return"string"==typeof n},fnc:function(n){return"function"==typeof n},und:function(n){return void 0===n},hex:function(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)},rgb:function(n){return/^rgb/.test(n)},hsl:function(n){return/^hsl/.test(n)},col:function(n){return e.hex(n)||e.rgb(n)||e.hsl(n)}};function a(n){var t=/([+-]?[0-9#.]+)(%|px|rpx|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(n);if(t)return t[2]}function i(n){var t={};for(var r in n)t[r]=n[r];return t}function u(n,t){var r=i(n);for(var e in n)r[e]=t.hasOwnProperty(e)?t[e]:n[e];return r}function o(n,t){return n.some(function(n){return n===t})}function s(n,i){return function(n,t){if(e.col(n))return n;var r=a(n),i=r?n.substr(0,n.length-r.length):n;return t&&!/\s/g.test(n)?i+t:i}(i,a(i)||(o(t,n)?function(n){return r(n,"translate")||"perspective"===n?"px":r(n,"rotate")||r(n,"skew")?"deg":void 0}(n):""))}var c=["","Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back"],f={In:[[.42,0,1,1],[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045]],Out:[[0,0,.58,1],[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275]],InOut:[[.42,0,.58,1],[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55]]},l={},h=function(n){f[n].forEach(function(t,r){l["ease"+n+c[r]]=t})};for(var p in f)h(p);var m=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},v=function(){function n(n,t){for(var r=0;r<t.length;r++){var e=t[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(t,r,e){return r&&n(t.prototype,r),e&&n(t,e),t}}(),g=function(){function r(){m(this,r),this.version="1.0.0",this.animates=[],this.easings=l}return v(r,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.tweenSettings=u(n,t),function(t){for(var r in t)if(!n.hasOwnProperty(r))return!0;return!1}(t)&&this.then(t),this}},{key:"then",value:function(n){var t=u(this.tweenSettings,n),r=function(n,t){var r,a=[];for(var i in t)if("transform"===i)for(var u=[],o=/(\w+)\((.+?)\)/g;null!==(u=o.exec(t[i]));)a.push({name:u[1],value:u[2].split(/,\s*/)});else n.hasOwnProperty(i)||a.push({name:(r=i,r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()),value:t[i]});return a.map(function(n){return{name:n.name,value:e.arr(n.value)?n.value.map(function(t){return s(n.name,t)}):s(n.name,n.value)}})}(t,n);if(this.animates.length>0){var a=this.animates[this.animates.length-1].props,o=[],c=[];r.forEach(function(n){a.some(function(t){return t.name===n.name})||c.push(i(n))}),a.forEach(function(n){r.some(function(t){if(t.name===n.name)return o.push(i(t)),!0})||o.push(i(n))}),this.animates.push({props:o.concat(c),tweens:t})}else this.animates.push({props:r,tweens:t});return this}},{key:"format",value:function(n){var r,a=n.tweens,i=[],u=[];return n.props.forEach(function(n){var r=n.name,a=n.value;o(t,r)?u.push(r+"("+(e.arr(a)?a.join(", "):a)+")"):i.push({type:"style",args:[r,a]})}),i.push({type:"style",args:["transform",u.join(" ")]}),{animates:i,option:{transformOrigin:a.transformOrigin,transition:{delay:a.delay,duration:a.duration,timingFunction:(r=a.easing,e.arr(r)?"cubic-bezier("+r.join(", ")+")":l.hasOwnProperty(r)?"cubic-bezier("+l[r].join(", ")+")":r)}}}}},{key:"end",value:function(){var n=this;return{actions:[].concat(function(n){if(Array.isArray(n)){for(var t=0,r=Array(n.length);t<n.length;t++)r[t]=n[t];return r}return Array.from(n)}(this.animates)).map(function(t){return n.format(t)})}}}]),r}();return function(n){return(new g).init(n)}});
